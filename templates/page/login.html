
{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>QR</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/add1.css' %}">
</head>
<body >
<div id="app">
 <div class="page__wrapper">
    {% include 'page/_left_side.menu.html' %}
    <div class="page__right">
        <div class="auth-form">
            <h1>login</h1>
            <input type="text" required v-model="login_email" placeholder="Email">
            <input type="password" required v-model="login_password" placeholder="Password">
            <button @click="sendLogin">ENTER</button>
            <p class="auth-form__grey">You don't have an account? <a href="{% url 'register_page' %}">Register</a></p>
            <div class="auth-form__demo"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 1C17.523 1 22 5.477 22 11C22 16.523 17.523 21 12 21C6.477 21 2 16.523 2 11C2 5.477 6.477 1 12 1ZM12 3C7.582 3 4 6.582 4 11C4 15.418 7.582 19 12 19C16.418 19 20 15.418 20 11C20 6.582 16.418 3 12 3ZM15.833 6.337C16.07 6.171 16.392 6.199 16.596 6.404C16.8 6.608 16.826 6.93 16.659 7.164C14.479 10.21 13.279 11.842 13.061 12.061C12.475 12.646 11.525 12.646 10.939 12.061C10.354 11.475 10.354 10.525 10.939 9.939C11.313 9.566 12.944 8.365 15.833 6.337ZM17.5 10C18.052 10 18.5 10.448 18.5 11C18.5 11.552 18.052 12 17.5 12C16.948 12 16.5 11.552 16.5 11C16.5 10.448 16.948 10 17.5 10ZM6.5 10C7.052 10 7.5 10.448 7.5 11C7.5 11.552 7.052 12 6.5 12C5.948 12 5.5 11.552 5.5 11C5.5 10.448 5.948 10 6.5 10ZM8.818 6.404C9.208 6.794 9.208 7.427 8.818 7.818C8.428 8.208 7.794 8.208 7.404 7.818C7.014 7.428 7.014 6.794 7.404 6.404C7.794 6.014 8.427 6.014 8.818 6.404ZM12 4.5C12.552 4.5 13 4.948 13 5.5C13 6.052 12.552 6.5 12 6.5C11.448 6.5 11 6.052 11 5.5C11 4.948 11.448 4.5 12 4.5Z" fill="#2873D9"/>
            </svg>
                <a href="{% url 'index' %}">

                    DEMO Version
                </a></div>
        </div>

    </div>
</div>
  <div class="page__mobile">
    <div class="page__mobile-logo">
       <a href="/">
            <img src="{% static 'images/logo-b.png' %}" alt="">
        </a>
    </div>
    <div class="page__mobile-text">
        <h1>We work only on the PC version of the site</h1>
        <p>Our analytical systems and metrics work only on pc users</p>
    </div>
</div>
</div>


 <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script>
     var app = new Vue({
            delimiters: ['[[', ']]'],
            el: '#app',
            data: {
                login_email:null,
                login_password:null,
            },

            methods: {
                sendLogin: function () {
                    let body = {'email':this.login_email,
                        'password':this.login_password}

                    fetch('{% url 'login_req' %}', {
                        method: 'post',
                        body: JSON.stringify(body),
                        headers: { "X-CSRFToken": '{{  csrf_token }}' },
                        credentials: 'same-origin'
                    }).then(res=>res.json())
                        .then(res => {

                            console.log(res)
                            if(res['status']==='success'){
                                window.location.href='{% url 'index' %}'
                            }

                        })
                },

            }
        })
</script>
</body>
</html>


